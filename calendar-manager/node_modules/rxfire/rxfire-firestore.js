!function(n,u,i,t){"use strict";function r(n,e){return r=n,t=e,new i.Observable(function(n){return{unsubscribe:r.onSnapshot(t||{},n)}});var r,t}function e(n,e){return r(n,e)}function o(n,e){return r(n,e)}function c(n){return e(n)}function f(n,e){var r;return u.__assign(u.__assign({},n.data()),e?((r={})[e]=n.id,r):null)}var d=["added","modified","removed"],a=function(i){return t.filter(function(n){for(var e=!1,r=0;r<n.length;r++){var t=n[r];if(i&&0<=i.indexOf(t.type)){e=!0;break}}return e})},s=t.filter(function(n){return 0<n.length});function l(n,e,r){for(var t=[],i=3;i<arguments.length;i++)t[i-3]=arguments[i];var o=n.slice();return o.splice.apply(o,u.__spreadArrays([e,r],t)),o}function p(e,n,r){return void 0===r&&(r=d),n.forEach(function(n){-1<r.indexOf(n.type)&&(e=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return l(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex===e.newIndex)return l(n,e.newIndex,1,e);var r=n.slice();return r.splice(e.oldIndex,1),r.splice(e.newIndex,0,e),r}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return l(n,e.oldIndex,1)}return n}(e,n))}),e}function x(n,e){return void 0===e&&(e=d),o(n).pipe(t.map(function(n){return n.docChanges()}),a(e),s)}function v(n){return o(n).pipe(t.map(function(n){return n.docs}))}n.auditTrail=function(n,e){return x(n,e).pipe(t.scan(function(n,e){return u.__spreadArrays(n,e)},[]))},n.collection=v,n.collectionChanges=x,n.collectionData=function(n,e){return v(n).pipe(t.map(function(n){return n.map(function(n){return f(n,e)})}))},n.doc=c,n.docData=function(n,e){return c(n).pipe(t.map(function(n){return f(n,e)}))},n.fromCollectionRef=o,n.fromDocRef=e,n.fromRef=r,n.snapToData=f,n.sortedChanges=function(n,r){return x(n,r).pipe(t.scan(function(n,e){return p(n,e,r)},[]),t.distinctUntilChanged())}}(this.rxfire=this.rxfire||{},tslib,rxjs,rxjs.operators);
//# sourceMappingURL=rxfire-firestore.js.map
