{"ast":null,"code":"var _jsxFileName = \"/Users/shiyuezhang/Desktop/myFiles/Chronolo-Geese/calendar-manager/src/pages/Classrooms.js\";\nimport React, { useState } from \"react\";\nimport Navbar from \"../common/Navbar\";\nimport { useParams } from \"react-router-dom\";\nimport \"../styles/TeacherRoomCode.css\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Box from \"@material-ui/core/Box\";\nimport { useFirestore, useUser, useFirestoreDocData as setFirestoreDocData } from \"reactfire\";\nimport * as firebase from 'firebase/app';\nimport { useHistory } from \"react-router-dom\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport TextField from \"@material-ui/core/TextField\";\nconst useStyles = makeStyles({\n  root: {\n    color: \"#5e548e\",\n    background: \"#E0B1CB\",\n    margin: \"10px\"\n  }\n});\n\nfunction Classrooms() {\n  const [open, setOpen] = React.useState(false); //open dialog to create a new class\n\n  const [className, setClassName] = React.useState(\"\");\n  const [openJoin, setOpenJoin] = React.useState(false); //open dialog to join a class\n\n  const [classId, setClassId] = React.useState(\"\");\n  const history = useHistory();\n  const user = useUser();\n  const {\n    uid\n  } = useParams();\n  const classesCollection = useFirestore().collection('classes');\n  const usersCollection = useFirestore().collection('users');\n  const classes = setFirestoreDocData(usersCollection.doc(uid)).classCodes;\n  const styles = useStyles();\n  const firestore = useFirestore();\n\n  const addClass = () => {\n    let id = \"\";\n    firestore.collection(\"classes\").add({\n      title: className,\n      professors: [uid],\n      students: []\n    }).then(pushed_user => {\n      id = pushed_user.w_.path.segments[1];\n      usersCollection.doc(uid).update({\n        classCodes: classes.concat({\n          code: id,\n          name: className\n        })\n      });\n    });\n    setOpen(false);\n  };\n\n  const joinClass = () => {\n    let className;\n    const docRef = classesCollection.doc(classId);\n    docRef.get().then(function (doc) {\n      if (doc.exists) {\n        console.log(doc.data());\n        className = doc.data().title;\n      }\n    }).catch(function (error) {\n      console.log('Error getting document:', error);\n    });\n    console.log(classId);\n    console.log(className); // docRef.update({\n    //     students:firebase.firestore.FieldValue.arrayUnion(uid),\n    //   });\n    // usersCollection.doc(user.uid).update({\n    //   classCodes:firebase.firestore.FieldValue.arrayUnion({\n    //     code: classId,\n    //     name: className,\n    //   }),\n    // });\n    // console.log(joinedClass);\n    // firestore\n    //   .collection(\"classes\").doc(classId)\n    //   .update({students: joinedClass.students.concat(uid)})\n    // firestore\n    //   .collection(\"users\")\n    //   .doc(uid)\n    //   .update({\n    //     classCodes: classes.concat({ code: classId, name: joinedClass.title }),\n    //   });\n  };\n\n  let newDia = /*#__PURE__*/React.createElement(Dialog, {\n    open: open,\n    onClose: () => setOpen(false),\n    \"aria-labelledby\": \"form-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(DialogTitle, {\n    id: \"form-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }\n  }, \"Create a New Class\"), /*#__PURE__*/React.createElement(DialogContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    autoFocus: true,\n    margin: \"dense\",\n    id: \"name\",\n    label: \"Class Name\",\n    onChange: e => setClassName(e.target.value),\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(DialogActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => setOpen(false),\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  }, \"Cancel\"), /*#__PURE__*/React.createElement(Button, {\n    onClick: () => addClass(),\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  }, \"Create Room\")));\n  let joinDia = /*#__PURE__*/React.createElement(Dialog, {\n    open: openJoin,\n    onClose: () => setOpenJoin(false),\n    \"aria-labelledby\": \"form-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(DialogTitle, {\n    id: \"form-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }\n  }, \"Join a Class\"), /*#__PURE__*/React.createElement(DialogContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    autoFocus: true,\n    margin: \"dense\",\n    id: \"name\",\n    label: \"Class Code\",\n    onChange: e => setClassId(e.target.value),\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(DialogActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => setOpenJoin(false),\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 9\n    }\n  }, \"Cancel\"), /*#__PURE__*/React.createElement(Button, {\n    onClick: () => joinClass(),\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 9\n    }\n  }, \"Join Room\")));\n\n  if (user) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Navbar, {\n      styles: {\n        position: \"absolute\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      spacing: 5,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      className: \"cont\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"paper_list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h5\",\n      style: {\n        color: \"#E0B1CB\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 21\n      }\n    }, \"CLASSROOMS:\")), /*#__PURE__*/React.createElement(Paper, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(List, {\n      className: \"ov\",\n      component: \"nav\",\n      \"aria-label\": \"classNames\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 21\n      }\n    }, classes.map(name => /*#__PURE__*/React.createElement(ListItem, {\n      button: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(ListItemText, {\n      primary: name.name + \" / \" + name.code,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 27\n      }\n    }))))))), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      className: \"cont\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"paper_button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: require(\"../assets/classroom.svg\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      disableElevation: true,\n      className: styles.root,\n      onClick: () => setOpen(true),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 21\n      }\n    }, \"NEW\")), /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      disableElevation: true,\n      className: styles.root,\n      onClick: () => setOpenJoin(true),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 21\n      }\n    }, \"JOIN\"))))), newDia, joinDia)));\n  } else {\n    history.push(\"/home\");\n  }\n}\n\nexport default Classrooms;","map":{"version":3,"sources":["/Users/shiyuezhang/Desktop/myFiles/Chronolo-Geese/calendar-manager/src/pages/Classrooms.js"],"names":["React","useState","Navbar","useParams","makeStyles","Grid","Typography","Paper","Button","List","ListItem","ListItemText","Box","useFirestore","useUser","useFirestoreDocData","setFirestoreDocData","firebase","useHistory","Dialog","DialogActions","DialogContent","DialogTitle","TextField","useStyles","root","color","background","margin","Classrooms","open","setOpen","className","setClassName","openJoin","setOpenJoin","classId","setClassId","history","user","uid","classesCollection","collection","usersCollection","classes","doc","classCodes","styles","firestore","addClass","id","add","title","professors","students","then","pushed_user","w_","path","segments","update","concat","code","name","joinClass","docRef","get","exists","console","log","data","catch","error","newDia","e","target","value","joinDia","position","map","require","push"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport Navbar from \"../common/Navbar\";\nimport { useParams } from \"react-router-dom\";\n\nimport \"../styles/TeacherRoomCode.css\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Box from \"@material-ui/core/Box\";\nimport {\n  useFirestore,\n  useUser,\n  useFirestoreDocData as setFirestoreDocData,\n} from \"reactfire\";\nimport * as firebase from 'firebase/app';\nimport { useHistory } from \"react-router-dom\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport TextField from \"@material-ui/core/TextField\";\n\nconst useStyles = makeStyles({\n  root: {\n    color: \"#5e548e\",\n    background: \"#E0B1CB\",\n    margin: \"10px\",\n  },\n});\n\nfunction Classrooms() {\n  const [open, setOpen] = React.useState(false); //open dialog to create a new class\n  const [className, setClassName] = React.useState(\"\");\n  const [openJoin, setOpenJoin] = React.useState(false); //open dialog to join a class\n  const [classId, setClassId] = React.useState(\"\");\n\n  const history = useHistory();\n  const user = useUser();\n  const { uid } = useParams();\n\n  const classesCollection = useFirestore().collection('classes');\n  const usersCollection = useFirestore().collection('users');\n  const classes = setFirestoreDocData(\n    usersCollection.doc(uid)\n  ).classCodes;\n\n  const styles = useStyles();\n\n  const firestore = useFirestore();\n\n  const addClass = () => {\n    let id = \"\";\n    firestore\n      .collection(\"classes\")\n      .add({\n        title: className,\n        professors: [uid],\n        students: [],\n      })\n      .then((pushed_user) => {\n        id = pushed_user.w_.path.segments[1];\n        usersCollection\n          .doc(uid)\n          .update({\n            classCodes: classes.concat({ code: id, name: className }),\n          });\n      });\n    setOpen(false);\n  };\n\n  const joinClass = () => {\n    let className;\n    const docRef = classesCollection.doc(classId);\n    docRef.get().then(function(doc) {\n      if (doc.exists) {\n        console.log(doc.data());\n        className = doc.data().title;\n      }\n    }).catch(function(error) {\n      console.log('Error getting document:', error);\n    });\nconsole.log(classId);\nconsole.log(className);\n    // docRef.update({\n    //     students:firebase.firestore.FieldValue.arrayUnion(uid),\n    //   });\n    // usersCollection.doc(user.uid).update({\n    //   classCodes:firebase.firestore.FieldValue.arrayUnion({\n    //     code: classId,\n    //     name: className,\n    //   }),\n    // });\n    \n\n    // console.log(joinedClass);\n\n    // firestore\n    //   .collection(\"classes\").doc(classId)\n    //   .update({students: joinedClass.students.concat(uid)})\n\n    // firestore\n    //   .collection(\"users\")\n    //   .doc(uid)\n    //   .update({\n    //     classCodes: classes.concat({ code: classId, name: joinedClass.title }),\n    //   });\n  };\n\n  let newDia = (\n    <Dialog\n      open={open}\n      onClose={() => setOpen(false)}\n      aria-labelledby=\"form-dialog-title\"\n    >\n      <DialogTitle id=\"form-dialog-title\">Create a New Class</DialogTitle>\n      <DialogContent>\n        <TextField\n          autoFocus\n          margin=\"dense\"\n          id=\"name\"\n          label=\"Class Name\"\n          onChange={(e) => setClassName(e.target.value)}\n          fullWidth\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={() => setOpen(false)} color=\"primary\">\n          Cancel\n        </Button>\n        <Button onClick={() => addClass()} color=\"primary\">\n          Create Room\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n\n  let joinDia = (\n    <Dialog\n      open={openJoin}\n      onClose={() => setOpenJoin(false)}\n      aria-labelledby=\"form-dialog-title\"\n    >\n      <DialogTitle id=\"form-dialog-title\">Join a Class</DialogTitle>\n      <DialogContent>\n        <TextField\n          autoFocus\n          margin=\"dense\"\n          id=\"name\"\n          label=\"Class Code\"\n          onChange={(e) => setClassId(e.target.value)}\n          fullWidth\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={() => setOpenJoin(false)} color=\"primary\">\n          Cancel\n        </Button>\n        <Button onClick={() => joinClass()} color=\"primary\">\n          Join Room\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n\n  if (user) {\n    return (\n      <>\n        <Navbar styles={{ position: \"absolute\" }} />\n        <div className=\"bg\">\n          <div>\n            <Grid container spacing={5}>\n              <Grid item className=\"cont\">\n                <div className=\"paper_list\">\n                  <Typography variant=\"h5\" style={{ color: \"#E0B1CB\" }}>\n                    <b>CLASSROOMS:</b>\n                  </Typography>\n                  <Paper>\n                    <List\n                      className=\"ov\"\n                      component=\"nav\"\n                      aria-label=\"classNames\"\n                    >\n                      {classes.map((name) => (\n                        <ListItem button>\n                          <ListItemText\n                            primary={name.name + \" / \" + name.code}\n                          />\n                        </ListItem>\n                      ))}\n                    </List>\n                  </Paper>\n                </div>\n              </Grid>\n              <Grid item className=\"cont\">\n                <div className=\"paper_button\">\n                  <img src={require(\"../assets/classroom.svg\")} />\n                  <Button\n                    variant=\"contained\"\n                    disableElevation\n                    className={styles.root}\n                    onClick={() => setOpen(true)}\n                  >\n                    <b>NEW</b>\n                  </Button>\n\n                  <Button\n                    variant=\"contained\"\n                    disableElevation\n                    className={styles.root}\n                    onClick={() => setOpenJoin(true)}\n                  >\n                    <b>JOIN</b>\n                  </Button>\n                </div>\n              </Grid>\n            </Grid>\n\n            {newDia}\n            {joinDia}\n          </div>\n        </div>\n      </>\n    );\n  } else {\n    history.push(\"/home\");\n  }\n}\n\nexport default Classrooms;\n"]},"metadata":{},"sourceType":"module"}